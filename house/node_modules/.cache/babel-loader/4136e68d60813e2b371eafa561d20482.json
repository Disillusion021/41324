{"remainingRequest":"D:\\HBuilderProjects\\house\\node_modules\\babel-loader\\lib\\index.js!D:\\HBuilderProjects\\house\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\HBuilderProjects\\house\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\HBuilderProjects\\house\\page\\card\\list.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\HBuilderProjects\\house\\page\\card\\list.vue","mtime":1637297913348},{"path":"D:\\HBuilderProjects\\house\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\HBuilderProjects\\house\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\HBuilderProjects\\house\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\HBuilderProjects\\house\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.search\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    var _this = this;\n\n    return {\n      tableInfo: {\n        currentPage: 1,\n        pageSize: 8,\n        total: 0,\n        columnInfo: [{\n          // type: \"index\",\n          title: \"序号\",\n          key: \"cardId\",\n          render: function render(h, params) {\n            return h('span', params.index + (_this.tableInfo.currentPage - 1) * _this.tableInfo.pageSize + 1);\n          }\n        }, {\n          title: \"会员卡名\",\n          key: \"cardName\"\n        }, {\n          title: \"有效天数/天\",\n          key: \"periodDate\"\n        }, {\n          title: \"有效分钟/分\",\n          key: \"periodTime\",\n          render: function render(h, params) {\n            var time = params.row.periodDate * 24 * 60;\n            return h('span', time);\n          }\n        }, {\n          title: \"价格/元\",\n          key: \"cardMoney\"\n        }, {\n          title: \"操作\",\n          slot: 'action'\n        }],\n        data: []\n      }\n    };\n  },\n  methods: {\n    init: function init() {\n      this.$data.tableInfo.currentPage = 0; // this.search();\n    },\n    newUser: function newUser() {\n      this.$router.push({\n        name: \"card_new\"\n      });\n    },\n    show: function show(cardId) {\n      this.$router.push({\n        name: \"card_detail\",\n        params: {\n          cardId: cardId\n        }\n      });\n    },\n    remove: function remove(cardId) {\n      var _this2 = this;\n\n      this.message.confirm({\n        title: \"删除提示\",\n        content: \"即将删除会员卡，确定吗？\",\n        onOk: function onOk() {\n          _this2.http.delete({\n            url: \"/card/info\",\n            param: {\n              cardId: cardId\n            }\n          }).then(function (data) {\n            var totalPage = Math.ceil((_this2.tableInfo.total - 1) / _this2.tableInfo.pageSize);\n            _this2.tableInfo.currentPage = _this2.tableInfo.currentPage > totalPage ? totalPage : _this2.tableInfo.currentPage;\n            _this2.tableInfo.currentPage = _this2.tableInfo.currentPage < 1 ? 1 : _this2.tableInfo.currentPage;\n\n            _this2.search();\n          });\n        },\n        onCancel: function onCancel() {\n          _this2.message.info('操作已取消');\n        }\n      });\n    },\n    search: function search() {\n      var _this3 = this;\n\n      this.http.get({\n        url: \"/card/page\",\n        param: {\n          currentPage: this.$data.tableInfo.currentPage,\n          pageSize: this.$data.tableInfo.pageSize\n        }\n      }).then(function (data) {\n        _this3.$data.tableInfo.currentPage = data.current;\n        _this3.$data.tableInfo.total = data.total;\n        _this3.$data.tableInfo.pageSize = data.size;\n        _this3.$data.tableInfo.data = data.records;\n      });\n    },\n    pageSearch: function pageSearch(changedPage) {\n      this.$data.tableInfo.currentPage = changedPage;\n      console.log(\"点击Page页面时调用search方法\");\n      this.search();\n    }\n  },\n  created: function created() {\n    console.log(\"页面创建时初始化currentPage\");\n    this.init();\n  },\n  activated: function activated() {\n    console.log(\"页面激活时调用search方法\");\n    this.search();\n  } // watch: {\n  // \t$route() {\n  // \t\t// alert(\"路由改变调用了监听函数并刷新页面\");\n  // \t\tthis.search();\n  // \t}\n  // }\n\n};",{"version":3,"sources":["list.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<Layout :class=\"'bg-white p-2'\">\r\n\t\t<Row :class=\"'m-1'\">\r\n\t\t\t<Col span=\"4\">\r\n\t\t\t\t<Button class=\"m-2\" type=\"error\" @click=\"newUser\">新增</Button>\r\n\t\t\t</Col>\r\n\t\t</Row>\r\n\t\t<Layout :class=\"'bg-white'\">\r\n\t\t\t<Table border :class=\"'m-1'\" :columns=\"tableInfo.columnInfo\" :data=\"tableInfo.data\">\r\n\t\t\t\t<template slot-scope=\"{row, index}\" slot=\"action\">\r\n\t\t\t\t\t<Button type=\"primary\" size=\"small\" style=\"margin-right: 5px;\" @click=\"show(row.cardId)\">修改</Button>\r\n\t\t\t\t\t<Button type=\"error\" size=\"small\" @click=\"remove(row.cardId)\">删除</Button>\r\n\t\t\t\t</template>\r\n\t\t\t</Table>\r\n\t\t\t<Page :class=\"'m-2 text-right'\" :page-size=\"tableInfo.pageSize\" @on-change=\"pageSearch\" :total=\"tableInfo.total\" /></Page>\r\n\t\t</Layout>\r\n\t</Layout>\r\n</template>\n\t\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttableInfo: {\r\n\t\t\t\t\tcurrentPage: 1,\r\n\t\t\t\t\tpageSize: 8,\r\n\t\t\t\t\ttotal: 0,\r\n\t\t\t\t\tcolumnInfo: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t// type: \"index\",\r\n\t\t\t\t\t\t\ttitle: \"序号\",\r\n\t\t\t\t\t\t\tkey: \"cardId\",\r\n\t\t\t\t\t\t\trender: (h, params) => {\r\n\t\t\t\t\t\t\t\treturn h('span', params.index + (this.tableInfo.currentPage - 1) * this.tableInfo.pageSize + 1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttitle: \"会员卡名\",\r\n\t\t\t\t\t\t\tkey: \"cardName\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttitle: \"有效天数/天\",\r\n\t\t\t\t\t\t\tkey: \"periodDate\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttitle: \"有效分钟/分\",\r\n\t\t\t\t\t\t\tkey: \"periodTime\",\r\n\t\t\t\t\t\t\trender: (h, params) => {\r\n\t\t\t\t\t\t\t\tlet time = params.row.periodDate * 24 * 60;\r\n\t\t\t\t\t\t\t\treturn h('span',time);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttitle: \"价格/元\",\r\n\t\t\t\t\t\t\tkey: \"cardMoney\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttitle: \"操作\",\r\n\t\t\t\t\t\t\tslot: 'action'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\tdata: []\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tinit: function() {\r\n\t\t\t\tthis.$data.tableInfo.currentPage = 0;\r\n\t\t\t\t// this.search();\r\n\t\t\t},\r\n\t\t\tnewUser: function() {\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tname: \"card_new\"\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tshow: function(cardId) {\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tname: \"card_detail\",\r\n\t\t\t\t\tparams: {\r\n\t\t\t\t\t\tcardId\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tremove: function(cardId) {\r\n\t\t\t\tthis.message.confirm({\r\n\t\t\t\t\ttitle: \"删除提示\",\r\n\t\t\t\t\tcontent: \"即将删除会员卡，确定吗？\",\r\n\t\t\t\t\tonOk: () => {\r\n\t\t\t\t\t\tthis.http.delete({\r\n\t\t\t\t\t\t\turl: \"/card/info\",\r\n\t\t\t\t\t\t\tparam: {\r\n\t\t\t\t\t\t\t\tcardId\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}).then(data => {\r\n\t\t\t\t\t\t\tlet totalPage = Math.ceil((this.tableInfo.total - 1) / this.tableInfo.pageSize);\r\n\t\t\t\t\t\t\tthis.tableInfo.currentPage = this.tableInfo.currentPage > totalPage ? totalPage : this.tableInfo.currentPage;\r\n\t\t\t\t\t\t\tthis.tableInfo.currentPage = this.tableInfo.currentPage < 1 ? 1 : this.tableInfo.currentPage;\r\n\t\t\t\t\t\t\tthis.search();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonCancel: () => {\r\n\t\t\t\t\t\tthis.message.info('操作已取消');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsearch: function() {\r\n\t\t\t\tthis.http.get({\r\n\t\t\t\t\turl: \"/card/page\",\r\n\t\t\t\t\tparam: {\r\n\t\t\t\t\t\tcurrentPage: this.$data.tableInfo.currentPage,\r\n\t\t\t\t\t\tpageSize: this.$data.tableInfo.pageSize\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then(data => {\r\n\t\t\t\t\tthis.$data.tableInfo.currentPage = data.current;\r\n\t\t\t\t\tthis.$data.tableInfo.total = data.total;\r\n\t\t\t\t\tthis.$data.tableInfo.pageSize = data.size;\r\n\t\t\t\t\tthis.$data.tableInfo.data = data.records;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tpageSearch: function(changedPage) {\r\n\t\t\t\tthis.$data.tableInfo.currentPage = changedPage;\r\n\t\t\t\tconsole.log(\"点击Page页面时调用search方法\");\r\n\t\t\t\tthis.search();\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated: function() {\r\n\t\t\tconsole.log(\"页面创建时初始化currentPage\");\r\n\t\t\tthis.init();\r\n\t\t},\r\n\t\tactivated: function() {\r\n\t\t\tconsole.log(\"页面激活时调用search方法\");\r\n\t\t\tthis.search();\r\n\t\t},\r\n\t\t// watch: {\r\n\t\t// \t$route() {\r\n\t\t// \t\t// alert(\"路由改变调用了监听函数并刷新页面\");\r\n\t\t// \t\tthis.search();\r\n\t\t// \t}\r\n\t\t// }\r\n\t}\n</script>\r\n<style>\n</style>"],"sourceRoot":"page/card"}]}