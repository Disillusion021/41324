{"remainingRequest":"D:\\HBuilderProjects\\house\\node_modules\\babel-loader\\lib\\index.js!D:\\HBuilderProjects\\house\\common\\http.js","dependencies":[{"path":"D:\\HBuilderProjects\\house\\common\\http.js","mtime":1637730703595},{"path":"D:\\HBuilderProjects\\house\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\HBuilderProjects\\house\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import axios from \"axios\";\nimport runtime_config from \"./config\";\nimport message from \"./message.js\";\nimport store from \"../common/store.js\";\nimport Qs from 'qs';\naxios.defaults.withCredentials = true;\naxios.defaults.headers.post[\"Content-Type\"] = \"application/x-www-form-urlencoded\";\naxios.defaults.headers.put[\"Content-Type\"] = \"application/json\";\nconsole.log(axios.defaults.headers);\n\nvar _instance = axios.create({\n  withCredentials: true,\n  baseURL: runtime_config[process.env.NODE_ENV].path\n});\n\n_instance.interceptors.request.use(function (config) {\n  return config;\n}, function (error) {\n  console.log(\"出错了\");\n});\n\nvar httpObject = {\n  _changeParam: function _changeParam(param) {\n    if (process.env.NODE_ENV !== \"local\") {\n      param.params = param.param;\n    }\n\n    return param;\n  },\n  put: function put(param) {\n    param.method = \"put\";\n    console.log(param);\n    return httpObject._request(httpObject._changeParam(param));\n  },\n  get: function get(param) {\n    param.method = \"get\";\n    return httpObject._request(httpObject._changeParam(param));\n  },\n  post: function post(param) {\n    param.method = \"post\";\n    return httpObject._request(httpObject._changeParam(param));\n  },\n  delete: function _delete(param) {\n    param.method = \"delete\";\n    return httpObject._request(httpObject._changeParam(param));\n  },\n  _request: function _request(param) {\n    return new Promise(function (resolve, reject) {\n      _instance.request(param).then(function (res) {\n        var response = typeof res === \"string\" ? JSON.parse(res) : res;\n        console.log(response);\n        var responseData = response.data;\n        var status = responseData.STATUS;\n\n        if (\"SUCCESS\" === status) {\n          resolve(responseData.DATA);\n        } else if (status === \"LOGIN_FAIL\") {\n          store.commit('loginOut');\n        } else if (status === \"FAIL\") {\n          message.warning(responseData.MESSAGE);\n        } else if (status === \"ERROR\") {\n          message.error(responseData.MESSAGE);\n        } else {\n          message.error(\"系统出现未知错误！\");\n        }\n      }).catch(function (err) {\n        message.error(\"系统出现未知错误！\");\n      });\n    });\n  }\n};\nexport default httpObject;",{"version":3,"sources":["D:\\HBuilderProjects\\house\\common\\http.js"],"names":["axios","runtime_config","message","store","Qs","defaults","withCredentials","headers","post","put","console","log","_instance","create","baseURL","process","env","NODE_ENV","path","interceptors","request","use","config","error","httpObject","_changeParam","param","params","method","_request","get","delete","Promise","resolve","reject","then","res","response","JSON","parse","responseData","data","status","STATUS","DATA","commit","warning","MESSAGE","catch","err"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport runtime_config from \"./config\";\nimport message from \"./message.js\";\nimport store from '../common/store.js';\n\timport Qs from 'qs';\r\naxios.defaults.withCredentials = true;\naxios.defaults.headers.post[\"Content-Type\"] = \"application/x-www-form-urlencoded\";\r\naxios.defaults.headers.put[\"Content-Type\"] = \"application/json\";\r\n\r\nconsole.log(axios.defaults.headers);\r\n\r\nlet _instance = axios.create({\r\n\twithCredentials: true,\n\tbaseURL: runtime_config[process.env.NODE_ENV].path,\n});\r\n_instance.interceptors.request.use(\n\tconfig => {\n\t\treturn config;\n\t}, \n\terror => {\n\t\tconsole.log(\"出错了\")\n\t}\n);\n\nconst httpObject = {\n\t\n\t_changeParam: param => {\n\t\tif (process.env.NODE_ENV !== \"local\") {\n\t\t\tparam.params = param.param;\n\t\t}\n\t\treturn param;\n\t},\n\tput: param => {\n\t\tparam.method = \"put\";\r\n\t\tconsole.log(param)\n\t\treturn httpObject._request(httpObject._changeParam(param));\n\t},\n\tget: param => {\n\t\tparam.method = \"get\";\n\t\treturn httpObject._request(httpObject._changeParam(param));\n\t},\n\tpost: param => {\n\t\tparam.method = \"post\";\n\t\treturn httpObject._request(httpObject._changeParam(param));\n\t},\n\tdelete: param => {\n\t\tparam.method = \"delete\";\n\t\treturn httpObject._request(httpObject._changeParam(param));\n\t},\n\t_request: param => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\t_instance.request(param)\n\t\t\t\t.then(res => {\r\n\t\t\t\t\t\n\t\t\t\t\tlet response = typeof res === \"string\" ? JSON.parse(res) : res;\n\t\t\t\t\tconsole.log(response)\r\n\t\t\t\t\tlet responseData = response.data;\r\n\t\t\t\t\tlet status = responseData.STATUS;\n\t\t\t\t\tif (\"SUCCESS\" === status) {\n\t\t\t\t\t\tresolve(responseData.DATA);\n\t\t\t\t\t} \r\n\t\t\t\t\telse if (status === \"LOGIN_FAIL\") {\r\n\t\t\t\t\t\tstore.commit('loginOut');\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (status === \"FAIL\") {\n\t\t\t\t\t\tmessage.warning(responseData.MESSAGE);\r\n\t\t\t\t\t}\n\t\t\t\t\telse if (status === \"ERROR\") {\n\t\t\t\t\t\tmessage.error(responseData.MESSAGE);\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tmessage.error(\"系统出现未知错误！\");\r\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tmessage.error(\"系统出现未知错误！\");\n\t\t\t\t});\n\t\t});\n\t}\n}\n\n\n\nexport default httpObject;"]}]}