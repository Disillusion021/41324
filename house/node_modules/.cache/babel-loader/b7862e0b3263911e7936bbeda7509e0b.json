{"remainingRequest":"D:\\HBuilderProjects\\house\\node_modules\\babel-loader\\lib\\index.js!D:\\HBuilderProjects\\house\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\HBuilderProjects\\house\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\HBuilderProjects\\house\\page\\user\\detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\HBuilderProjects\\house\\page\\user\\detail.vue","mtime":1636795319030},{"path":"D:\\HBuilderProjects\\house\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\HBuilderProjects\\house\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\HBuilderProjects\\house\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\HBuilderProjects\\house\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.search\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    return {\n      user: {\n        nickName: \"\",\n        password: \"\"\n      },\n      userId: 0,\n      roles: [],\n      allRoles: [] // updateFlg: false,\n      // oldUser: {},\n      // oldRoles: [],\n\n    };\n  },\n  methods: {\n    roleChange: function roleChange(roleId) {},\n    cancel: function cancel() {\n      this.$tabs.close();\n    },\n    submit: function submit() {\n      var self = this;\n      var roles = [];\n\n      for (var index in this.$data.roles) {\n        var roleItem = this.$data.roles[index];\n\n        if (roleItem.has) {\n          roles.push(roleItem.roleId);\n        }\n      } // self.user.openId = 0;\n\n\n      self.user.roles = JSON.stringify(roles);\n      delete self.user.ct;\n      delete self.user.ut;\n      delete self.user.cu;\n      delete self.user.uu;\n      delete self.user.openId;\n      console.log(self.user);\n      this.http.put({\n        url: \"/user/info\",\n        param: self.user\n      }).then(function () {\n        self.message.info(\"修改成功\");\n      });\n    },\n    init: function init() {\n      this.search();\n    },\n    searchUser: function searchUser() {\n      var _this = this;\n\n      var self = this;\n      this.http.get({\n        url: \"/user/info\",\n        param: {\n          userId: self.$data.user.userId\n        }\n      }).then(function (data) {\n        self.user = data.user;\n\n        for (var jndex in self.allRoles) {\n          var role = self.allRoles[jndex];\n          role.has = false;\n\n          for (var index in data.roles) {\n            var roleItem = data.roles[index];\n\n            if (roleItem.roleId == role.roleId) {\n              role.has = true;\n\n              _this.roles.push(role);\n            }\n          }\n        }\n      });\n    },\n    search: function search() {\n      var self = this; // console.log(\"hahahahah\");\n\n      this.http.get({\n        url: \"/role/all\"\n      }).then(function (data) {\n        self.$data.allRoles = data;\n        console.log(self.allRoles);\n      }).then(function () {\n        self.searchUser();\n      });\n    }\n  },\n  created: function created() {},\n  mounted: function mounted() {\n    this.$data.user.userId = this.$route.params.userId;\n    this.init();\n  }\n};",{"version":3,"sources":["detail.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <Layout class=\"p-5 bg-white\">\n        <Form class=\"p-5\" :model=\"user\" :label-width=\"80\">\r\n\t\t\t<Row>\r\n\t\t\t\t<Col span=\"8\">\r\n\t\t\t\t\t<FormItem class=\"w-100\" label=\"账号\">\n\t\t\t\t\t\t<Input v-model=\"user.account\"/>\n\t\t\t\t\t</FormItem>\n\t\t\t\t\t<FormItem class=\"w-100\" label=\"密码\">\n\t\t\t\t\t\t<Input v-model=\"user.password\"/>\n\t\t\t\t\t</FormItem>\n\t\t\t\t\t<FormItem class=\"w-100\" label=\"电话\">\n\t\t\t\t\t\t<Input v-model=\"user.tel\"/>\n\t\t\t\t\t</FormItem></Col>\r\n\t\t\t\t<Col span=\"8\">\r\n\t\t\t\t\t<FormItem class=\"w-100\" label=\"身份证\">\n\t\t\t\t\t\t<Input v-model=\"user.secId\"/>\n\t\t\t\t\t</FormItem>\n\t\t\t\t\t<FormItem class=\"w-100\" label=\"创建时间\">\n\t\t\t\t\t\t<label>{{user.ct}}</label>\n\t\t\t\t\t</FormItem>\r\n\t\t\t\t</Col>\r\n\t\t\t\t<Col span=\"8\">\r\n\t\t\t\t\t<FormItem class=\"w-100\" label=\"角色\">\r\n\t\t\t\t\t\t<div v-for=\"(item, key) in roles\" :key=\"key\">\r\n\t\t\t\t\t\t\t<Checkbox @on-change=\"roleChange(item.roleId)\" v-model=\"item.has\">\r\n\t\t\t\t\t\t\t{{item.roleName}}</Checkbox>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</FormItem>\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\n            \n            \r\n\t\t\t<FormItem>\r\n\t\t\t    <Button @click=\"submit\" type=\"primary\">提交</Button>\r\n\t\t\t    <Button @click=\"cancel\" style=\"margin-left: 8px\">取消</Button>\r\n\t\t\t</FormItem>\n        </Form>\n    </Layout>\n\n</template>\n<script>\n    export default {\n        data() {\n            return {\n                user: {\n                    nickName: \"\",\n                    password: \"\",\n                },\r\n\t\t\t\tuserId: 0,\r\n                roles: [],\n                allRoles: [],\n                // updateFlg: false,\n                // oldUser: {},\n                // oldRoles: [],\n\n            }\n        },\n        methods: {\r\n\t\t\troleChange: function(roleId) {\r\n\t\t\t\t\r\n\t\t\t},\n            cancel: function () {\n                this.$tabs.close();\n            },\n            submit: function () {\n                let self = this;\r\n\t\t\t\tlet roles = [];\r\n\t\t\t\tfor (let index in this.$data.roles) {\r\n\t\t\t\t\tlet roleItem = this.$data.roles[index];\r\n\t\t\t\t\tif (roleItem.has) {\r\n\t\t\t\t\t\troles.push(roleItem.roleId);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// self.user.openId = 0;\r\n\t\t\t\tself.user.roles = JSON.stringify(roles);\r\n\t\t\t\tdelete self.user.ct;\r\n\t\t\t\tdelete self.user.ut;\r\n\t\t\t\tdelete self.user.cu;\r\n\t\t\t\tdelete self.user.uu;\r\n\t\t\t\tdelete self.user.openId;\r\n\t\t\t\tconsole.log(self.user);\n                this.http.put({\n                    url: \"/user/info\",\n                    param: self.user,\n                }).then(() => {\n                    self.message.info(\"修改成功\");\n                });\n            },\n            init: function () {\n                this.search();\n            },\n            searchUser: function () {\n                let self = this;\n\n                this.http.get({\n                    url: \"/user/info\",\n                    param: {\n                        userId: self.$data.user.userId\n                    }\n                }).then(data => {\r\n\t\t\t\t\tself.user = data.user;\r\n\t\t\t\t\tfor (let jndex in self.allRoles) {\r\n\t\t\t\t\t\tlet role = self.allRoles[jndex];\r\n\t\t\t\t\t\trole.has = false;\r\n\t\t\t\t\t\tfor (let index in data.roles) {\r\n\t\t\t\t\t\t\tlet roleItem = data.roles[index];\r\n\t\t\t\t\t\t\tif (roleItem.roleId == role.roleId) {\r\n\t\t\t\t\t\t\t\trole.has = true;\r\n\t\t\t\t\t\t\t\tthis.roles.push(role);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\n                });\n            },\n\n            search: function () {\n                let self = this;\r\n\t\t\t\t// console.log(\"hahahahah\");\n                this.http.get({\n                    url: \"/role/all\",\n                }).then(data => {\n                    self.$data.allRoles = data;\r\n\t\t\t\t\tconsole.log(self.allRoles);\n                }).then(() => {\n                    self.searchUser();\n                });\n            }\n\n        },\n\n        created: function () {\r\n\n        },\n        mounted: function () {\r\n\t\t\tthis.$data.user.userId = this.$route.params.userId;\n            this.init();\n        }\n    }\n</script>\n\n<style>\n</style>\n"],"sourceRoot":"page/user"}]}