{"remainingRequest":"D:\\html_repo\\house\\node_modules\\babel-loader\\lib\\index.js!D:\\html_repo\\house\\common\\store.js","dependencies":[{"path":"D:\\html_repo\\house\\common\\store.js","mtime":1697106595890},{"path":"D:\\html_repo\\house\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1697106597071},{"path":"D:\\html_repo\\house\\node_modules\\babel-loader\\lib\\index.js","mtime":1697106596884}],"contextDependencies":[],"result":["import Vue from 'vue';\nimport Vuex from 'vuex';\nimport local from \"./_local.js\";\nimport http from \"./http.js\";\nVue.use(Vuex);\nvar loginObject = {\n  login: function login(param) {\n    return new Promise(function (resolve, reject) {\n      http.put({\n        url: \"/system/login\",\n        param: param.data\n      }).then(function (data) {\n        if (param.rem) {\n          local.setItem(\"LOGIN_INFO\", param);\n        }\n\n        local.session.setItem(\"CURRENT_USER\", data);\n        resolve(data);\n      });\n    });\n  }\n};\nvar store = new Vuex.Store({\n  state: {\n    isAlreadyLogin: false,\n    currentUser: undefined\n  },\n  mutations: {\n    checkLogin: function checkLogin(state) {\n      var currentUser = local.session.getItem(\"CURRENT_USER\");\n\n      if (currentUser) {\n        state.isAlreadyLogin = true;\n        state.currentUser = currentUser;\n        return;\n      }\n\n      return;\n      var loginParam = local.getItem(\"LOGIN_INFO\");\n\n      if (loginParam && loginParam.data && loginParam.data.password && loginParam.data.account) {\n        loginObject.login(loginParam).then(function (data) {\n          state.isAlreadyLogin = true;\n          state.currentUser = data;\n        });\n      }\n    },\n    login: function login(state, param) {\n      loginObject.login(param).then(function (data) {\n        state.isAlreadyLogin = true;\n        state.currentUser = data;\n      });\n    },\n    loginOut: function loginOut(state) {\n      state.isAlreadyLogin = false;\n      state.currentUser = undefined;\n      local.session.removeItem(\"CURRENT_USER\");\n    }\n  }\n});\nstore.local = local;\nexport default store;",{"version":3,"sources":["D:\\html_repo\\house\\common\\store.js"],"names":["Vue","Vuex","local","http","use","loginObject","login","param","Promise","resolve","reject","put","url","data","then","rem","setItem","session","store","Store","state","isAlreadyLogin","currentUser","undefined","mutations","checkLogin","getItem","loginParam","password","account","loginOut","removeItem"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,OAAOC,KAAP;AACA,OAAOC,IAAP;AAEAH,GAAG,CAACI,GAAJ,CAAQH,IAAR;AAEA,IAAII,WAAW,GAAG;AACjBC,EAAAA,KAAK,EAAE,eAASC,KAAT,EAAgB;AACtB,WAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACvCP,MAAAA,IAAI,CAACQ,GAAL,CAAS;AACRC,QAAAA,GAAG,EAAE,eADG;AAERL,QAAAA,KAAK,EAAEA,KAAK,CAACM;AAFL,OAAT,EAGGC,IAHH,CAGQ,UAAAD,IAAI,EAAI;AACf,YAAIN,KAAK,CAACQ,GAAV,EAAe;AACdb,UAAAA,KAAK,CAACc,OAAN,CAAc,YAAd,EAA4BT,KAA5B;AACA;;AACDL,QAAAA,KAAK,CAACe,OAAN,CAAcD,OAAd,CAAsB,cAAtB,EAAsCH,IAAtC;AACAJ,QAAAA,OAAO,CAACI,IAAD,CAAP;AACA,OATD;AAUA,KAXM,CAAP;AAYA;AAdgB,CAAlB;AAiBA,IAAMK,KAAK,GAAG,IAAIjB,IAAI,CAACkB,KAAT,CAAe;AAC5BC,EAAAA,KAAK,EAAE;AACNC,IAAAA,cAAc,EAAE,KADV;AAENC,IAAAA,WAAW,EAAEC;AAFP,GADqB;AAK5BC,EAAAA,SAAS,EAAE;AACVC,IAAAA,UADU,sBACCL,KADD,EACQ;AACjB,UAAIE,WAAW,GAAGpB,KAAK,CAACe,OAAN,CAAcS,OAAd,CAAsB,cAAtB,CAAlB;;AACA,UAAIJ,WAAJ,EAAiB;AAChBF,QAAAA,KAAK,CAACC,cAAN,GAAuB,IAAvB;AACAD,QAAAA,KAAK,CAACE,WAAN,GAAoBA,WAApB;AACA;AACA;;AACD;AACA,UAAIK,UAAU,GAAGzB,KAAK,CAACwB,OAAN,CAAc,YAAd,CAAjB;;AACA,UAAIC,UAAU,IACbA,UAAU,CAACd,IADR,IAEHc,UAAU,CAACd,IAAX,CAAgBe,QAFb,IAGHD,UAAU,CAACd,IAAX,CAAgBgB,OAHjB,EAG0B;AACzBxB,QAAAA,WAAW,CAACC,KAAZ,CAAkBqB,UAAlB,EAA8Bb,IAA9B,CAAmC,UAAAD,IAAI,EAAI;AAC1CO,UAAAA,KAAK,CAACC,cAAN,GAAuB,IAAvB;AACAD,UAAAA,KAAK,CAACE,WAAN,GAAoBT,IAApB;AACA,SAHD;AAIA;AACD,KAnBS;AAoBVP,IAAAA,KApBU,iBAoBJc,KApBI,EAoBGb,KApBH,EAoBU;AACnBF,MAAAA,WAAW,CAACC,KAAZ,CAAkBC,KAAlB,EAAyBO,IAAzB,CAA8B,UAAAD,IAAI,EAAI;AACrCO,QAAAA,KAAK,CAACC,cAAN,GAAuB,IAAvB;AACAD,QAAAA,KAAK,CAACE,WAAN,GAAoBT,IAApB;AACA,OAHD;AAIA,KAzBS;AA0BViB,IAAAA,QA1BU,oBA0BDV,KA1BC,EA0BM;AACfA,MAAAA,KAAK,CAACC,cAAN,GAAuB,KAAvB;AACAD,MAAAA,KAAK,CAACE,WAAN,GAAoBC,SAApB;AACArB,MAAAA,KAAK,CAACe,OAAN,CAAcc,UAAd,CAAyB,cAAzB;AACA;AA9BS;AALiB,CAAf,CAAd;AAsCAb,KAAK,CAAChB,KAAN,GAAcA,KAAd;AAEA,eAAegB,KAAf","sourcesContent":["import Vue from 'vue';\r\nimport Vuex from 'vuex';\r\nimport local from './_local.js';\r\nimport http from './http.js';\r\n\r\nVue.use(Vuex);\r\n\r\nlet loginObject = {\r\n\tlogin: function(param) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\thttp.put({\r\n\t\t\t\turl: \"/system/login\",\r\n\t\t\t\tparam: param.data\r\n\t\t\t}).then(data => {\r\n\t\t\t\tif (param.rem) {\r\n\t\t\t\t\tlocal.setItem(\"LOGIN_INFO\", param);\r\n\t\t\t\t}\r\n\t\t\t\tlocal.session.setItem(\"CURRENT_USER\", data);\r\n\t\t\t\tresolve(data);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n};\r\n\r\nconst store = new Vuex.Store({\r\n\tstate: {\r\n\t\tisAlreadyLogin: false,\r\n\t\tcurrentUser: undefined\r\n\t},\r\n\tmutations: {\r\n\t\tcheckLogin(state) {\r\n\t\t\tlet currentUser = local.session.getItem(\"CURRENT_USER\");\r\n\t\t\tif (currentUser) {\r\n\t\t\t\tstate.isAlreadyLogin = true;\r\n\t\t\t\tstate.currentUser = currentUser;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t\tlet loginParam = local.getItem(\"LOGIN_INFO\");\r\n\t\t\tif (loginParam && \r\n\t\t\t\tloginParam.data &&\r\n\t\t\t\tloginParam.data.password && \r\n\t\t\t\tloginParam.data.account) {\r\n\t\t\t\tloginObject.login(loginParam).then(data => {\r\n\t\t\t\t\tstate.isAlreadyLogin = true;\r\n\t\t\t\t\tstate.currentUser = data;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tlogin(state, param) {\r\n\t\t\tloginObject.login(param).then(data => {\r\n\t\t\t\tstate.isAlreadyLogin = true;\r\n\t\t\t\tstate.currentUser = data;\r\n\t\t\t});\r\n\t\t},\r\n\t\tloginOut(state) {\r\n\t\t\tstate.isAlreadyLogin = false;\r\n\t\t\tstate.currentUser = undefined;\r\n\t\t\tlocal.session.removeItem(\"CURRENT_USER\");\r\n\t\t}\r\n\t}\r\n});\r\nstore.local = local;\r\n\r\nexport default store;\r\n"]}]}