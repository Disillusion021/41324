{"remainingRequest":"D:\\html_repo\\house\\node_modules\\babel-loader\\lib\\index.js!D:\\html_repo\\house\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\html_repo\\house\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\html_repo\\house\\page\\role\\detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\html_repo\\house\\page\\role\\detail.vue","mtime":1697106602349},{"path":"D:\\html_repo\\house\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1697106597071},{"path":"D:\\html_repo\\house\\node_modules\\babel-loader\\lib\\index.js","mtime":1697106596884},{"path":"D:\\html_repo\\house\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1697106597071},{"path":"D:\\html_repo\\house\\node_modules\\vue-loader\\lib\\index.js","mtime":1697106601613}],"contextDependencies":[],"result":["import \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    return {\n      role: {\n        roleId: 0,\n        roleName: \"\",\n        permissions: []\n      },\n      permissions: [],\n      allPermissions: []\n    };\n  },\n  methods: {\n    submit: function submit() {\n      var self = this;\n      this.$data.permissions = [];\n\n      for (var index in this.$data.allPermissions) {\n        var permission = this.$data.allPermissions[index];\n\n        if (permission.indeterminate || permission.checked) {\n          this.$data.permissions.push(permission.permissionId);\n\n          for (var jndex in permission.children) {\n            var subPermission = permission.children[jndex];\n\n            if (subPermission.checked) {\n              this.$data.permissions.push(subPermission.permissionId);\n            }\n          }\n        }\n      }\n\n      if (this.$data.permissions.length === 0) {\n        this.message.error(\"请选择权限\");\n        return;\n      }\n\n      if (this.$data.role.roleName.length === 0) {\n        this.message.error(\"请输入角色名\");\n        return;\n      }\n\n      delete self.$data.role.ct;\n      delete self.$data.role.ut;\n      delete self.$data.role.cu;\n      delete self.$data.role.uu;\n      self.$data.role.permissions = JSON.stringify(self.$data.permissions);\n      this.http.put({\n        url: \"/role/info\",\n        param: self.$data.role\n      }).then(function (data) {\n        self.message.info(\"修改成功\");\n        self.$tabs.close();\n      });\n    },\n    cancel: function cancel() {\n      this.$tabs.close();\n    },\n    init: function init() {\n      this.searchPermission();\n    },\n    searchPermission: function searchPermission() {\n      var _this = this;\n\n      var self = this;\n      this.http.get({\n        url: \"/role/info\",\n        param: {\n          roleId: self.$data.role.roleId\n        }\n      }).then(function (data) {\n        console.log(data);\n        self.$data.role = data.role;\n        _this.$data.permissions = data.permissions ? data.permissions : [];\n      }).then(function () {\n        self.http.get({\n          url: \"/permission/all\"\n        }).then(function (data) {\n          console.log(data);\n          self.$data.allPermissions = [];\n\n          for (var index in data) {\n            var permission = {};\n            permission.title = data[index].name;\n            permission.expand = true;\n            permission.children = [];\n            permission.permissionId = data[index].permissionId;\n\n            for (var jndex in data[index].permissions) {\n              var subPermission = {};\n              subPermission.title = data[index].permissions[jndex].name;\n              subPermission.permissionId = data[index].permissions[jndex].permissionId;\n\n              if (self.$data.permissions.includes(data[index].permissions[jndex].permissionId)) {\n                subPermission.checked = true;\n              }\n\n              permission.children.push(subPermission);\n            }\n\n            self.$data.allPermissions.push(permission);\n          }\n        });\n      });\n    }\n  },\n  created: function created() {\n    this.$data.role.roleId = this.$route.params.roleId;\n    console.log(this.$data.role.roleId);\n    this.init();\n  }\n};",{"version":3,"sources":["detail.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<Layout class=\"p-5 bg-white\">\r\n\t\t<Form :label-width=\"80\">\r\n\t\t\t<FormItem class=\"w-50\" label=\"角色ID\">\r\n\t\t\t\t<label>{{role.roleId}}</label>\r\n\t\t\t</FormItem>\r\n\t\t\t<FormItem class=\"w-50\" label=\"角色名\">\r\n\t\t\t\t<Input v-model=\"role.roleName\" placeholder=\"请输入角色的名称\"></Input>\r\n\t\t\t</FormItem>\r\n\t\t\t<FormItem class=\"w-50\" label=\"状态\">\r\n\t\t\t\t<i-switch v-model=\"role.statu\"></i-switch>\r\n\t\t\t</FormItem>\r\n\t\t\t<FormItem class=\"w-50\" label=\"权限\">\r\n\t\t\t\t<Tree \r\n\t\t\t\t\t:data=\"allPermissions\" show-checkbox multiple></Tree>\r\n\t\t\t</FormItem>\r\n\t\t\t<FormItem class=\"text-right\">\r\n\t\t\t\t<Button @click=\"submit\" type=\"primary\">提交</Button>\r\n\t\t\t\t<Button @click=\"cancel\" class=\"ml-2\">取消</Button>\r\n\t\t\t</FormItem>\r\n\t\t</Form>\r\n\t</Layout>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata: function() {\r\n\t\t\treturn {\r\n\t\t\t\trole: {\r\n\t\t\t\t\troleId: 0,\r\n\t\t\t\t\troleName: \"\",\r\n\t\t\t\t\tpermissions: [],\r\n\t\t\t\t},\r\n\t\t\t\tpermissions: [],\r\n\t\t\t\tallPermissions: []\r\n\t\t\t};\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tsubmit: function() {\r\n\t\t\t\tlet self = this;\r\n\t\t\t\t\r\n\t\t\t\tthis.$data.permissions = [];\r\n\t\t\t\tfor (let index in this.$data.allPermissions) {\r\n\t\t\t\t\tlet permission = this.$data.allPermissions[index];\r\n\t\t\t\t\tif (permission.indeterminate || permission.checked) {\r\n\t\t\t\t\t\tthis.$data.permissions.push(permission.permissionId);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tfor (let jndex in permission.children) {\r\n\t\t\t\t\t\t\tlet subPermission = permission.children[jndex];\r\n\t\t\t\t\t\t\tif (subPermission.checked) {\r\n\t\t\t\t\t\t\t\tthis.$data.permissions.push(subPermission.permissionId);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\tif (this.$data.permissions.length === 0) {\r\n\t\t\t\t\tthis.message.error(\"请选择权限\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (this.$data.role.roleName.length === 0) {\r\n\t\t\t\t\tthis.message.error(\"请输入角色名\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tdelete self.$data.role.ct;\r\n\t\t\t\tdelete self.$data.role.ut;\r\n\t\t\t\tdelete self.$data.role.cu;\r\n\t\t\t\tdelete self.$data.role.uu;\r\n\t\t\t\tself.$data.role.permissions = JSON.stringify(self.$data.permissions);\r\n\t\t\t\tthis.http.put({\r\n\t\t\t\t\turl: \"/role/info\",\r\n\t\t\t\t\tparam: self.$data.role,\r\n\t\t\t\t}).then(data => {\r\n\t\t\t\t\tself.message.info(\"修改成功\");\r\n\t\t\t\t\tself.$tabs.close();\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tcancel: function() {\r\n\t\t\t\tthis.$tabs.close();\r\n\t\t\t},\r\n\t\t\tinit: function() {\r\n\t\t\t\tthis.searchPermission();\r\n\t\t\t},\r\n\t\t\tsearchPermission: function() {\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tthis.http.get({\r\n\t\t\t\t\turl: \"/role/info\",\r\n\t\t\t\t\tparam: {\r\n\t\t\t\t\t\troleId : self.$data.role.roleId\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then(data => {\r\n\t\t\t\t\tconsole.log(data);\r\n\t\t\t\t\tself.$data.role = data.role;\r\n\t\t\t\t\tthis.$data.permissions = data.permissions ? data.permissions : [];\r\n\t\t\t\t\t\r\n\t\t\t\t}).then(() => {\r\n\t\t\t\t\tself.http.get({\r\n\t\t\t\t\t\turl: \"/permission/all\",\r\n\t\t\t\t\t}).then(data => {\r\n\t\t\t\t\t\tconsole.log(data);\r\n\t\t\t\t\t\tself.$data.allPermissions = [];\r\n\t\t\t\t\t\tfor (let index in data) {\r\n\t\t\t\t\t\t\tlet permission = {};\r\n\t\t\t\t\t\t\tpermission.title = data[index].name;\r\n\t\t\t\t\t\t\tpermission.expand = true;\r\n\t\t\t\t\t\t\tpermission.children = [];\r\n\t\t\t\t\t\t\tpermission.permissionId = data[index].permissionId;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tfor (let jndex in data[index].permissions) {\r\n\t\t\t\t\t\t\t\tlet subPermission = {};\r\n\t\t\t\t\t\t\t\tsubPermission.title = data[index].permissions[jndex].name;\r\n\t\t\t\t\t\t\t\tsubPermission.permissionId = data[index].permissions[jndex].permissionId;\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (self.$data.permissions.includes(data[index].permissions[jndex].permissionId)) {\r\n\t\t\t\t\t\t\t\t\tsubPermission.checked = true;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tpermission.children.push(subPermission);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tself.$data.allPermissions.push(permission);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated: function () {\r\n\t\t\tthis.$data.role.roleId = this.$route.params.roleId;\r\n\t\t\tconsole.log(this.$data.role.roleId);\r\n\t\t\tthis.init();\r\n\t\t},\r\n\t}\r\n</script>\r\n\r\n<style>\r\n</style>\r\n"],"sourceRoot":"page/role"}]}