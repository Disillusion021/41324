{"remainingRequest":"D:\\html_repo\\house\\node_modules\\babel-loader\\lib\\index.js!D:\\html_repo\\house\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\html_repo\\house\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\html_repo\\house\\page\\vip\\list.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\html_repo\\house\\page\\vip\\list.vue","mtime":1697106602357},{"path":"D:\\html_repo\\house\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1697106597071},{"path":"D:\\html_repo\\house\\node_modules\\babel-loader\\lib\\index.js","mtime":1697106596884},{"path":"D:\\html_repo\\house\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1697106597071},{"path":"D:\\html_repo\\house\\node_modules\\vue-loader\\lib\\index.js","mtime":1697106601613}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.search\";\nimport \"core-js/modules/es6.date.to-iso-string\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.set\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.array.from\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    var _this = this;\n\n    return {\n      regRange: [],\n      deadRange: [],\n      cardName: [],\n      searchKey: ['', '', '', '', null],\n      depositState: ['已充值', '未充值', '已扣押'],\n      tableInfo: {\n        currentPage: 1,\n        pageSize: 8,\n        total: 0,\n        columnInfo: [{\n          title: \"会员编号\",\n          key: \"vipId\",\n          render: function render(h, params) {\n            return h('span', params.index + (_this.tableInfo.currentPage - 1) * _this.tableInfo.pageSize + 1);\n          },\n          width: 130,\n          fixed: 'left'\n        }, {\n          title: \"会员名\",\n          key: \"clientName\",\n          fixed: 'left',\n          width: 180\n        }, {\n          title: \"押金状态\",\n          key: \"depositState\",\n          width: 200\n        }, {\n          title: \"VIP类别\",\n          key: \"cardName\",\n          width: 200\n        }, {\n          title: \"VIP注册时间\",\n          key: \"regDate\",\n          width: 200\n        }, {\n          title: \"VIP到期时间\",\n          key: \"vipDeadline\",\n          width: 200\n        }, {\n          title: \"VIP状态\",\n          key: \"vipDeleteFlag\",\n          render: function render(h, params) {\n            var flag;\n\n            if (params.row.vipDeleteFlag == 1) {\n              flag = \"有效期内\";\n            } else {\n              flag = \"已过期\";\n            }\n\n            return h('span', flag);\n          },\n          width: 200\n        }, {\n          title: \"联系电话\",\n          key: \"phone\",\n          width: 200\n        }, {\n          title: \"操作\",\n          slot: 'action',\n          // fixed: 'right',\n          width: 200\n        }],\n        data: []\n      }\n    };\n  },\n  methods: {\n    init: function init() {\n      var _this2 = this;\n\n      this.$data.tableInfo.currentPage = 0; // this.search();\n\n      this.http.get({\n        url: \"/card/page\",\n        param: {\n          currentPage: 1,\n          pageSize: 99999\n        }\n      }).then(function (data) {\n        var cardName = [];\n\n        for (var k in data.records) {\n          cardName[k] = data.records[k].cardName;\n        }\n\n        _this2.$data.cardName = Array.from(new Set(cardName));\n      });\n    },\n    show: function show(vipId) {\n      this.$router.push({\n        name: \"vip_detail\",\n        params: {\n          vipId: vipId\n        }\n      });\n    },\n    search: function search() {\n      var _this3 = this;\n\n      var deadRange = [];\n      var regRange = []; // alert(new Date(+this.$data.deadRange[0] + 8 * 3600 * 1000).toISOString());\n      // alert(new Date(+this.$data.deadRange[1] + 8 * 3600 * 1000).toISOString());\n\n      if (this.$data.deadRange[0]) {\n        deadRange[0] = new Date(+this.$data.deadRange[0] + 8 * 3600 * 1000).toISOString();\n        deadRange[1] = new Date(+this.$data.deadRange[1] + 8 * 3600 * 1000).toISOString(); // alert(deadRange[0]);\n        // alert(deadRange[1]);\n      }\n\n      if (this.$data.regRange[0]) {\n        regRange[0] = new Date(+this.$data.regRange[0] + 8 * 3600 * 1000).toISOString();\n        regRange[1] = new Date(+this.$data.regRange[1] + 8 * 3600 * 1000).toISOString(); // alert(regRange[0]);\n        // alert(regRange[1]);\n      }\n\n      this.http.get({\n        url: \"/vip-client-deposit-card-vo/page\",\n        param: {\n          currentPage: this.$data.tableInfo.currentPage,\n          pageSize: this.$data.tableInfo.pageSize,\n          searchKey: JSON.stringify(this.$data.searchKey),\n          deadRange: JSON.stringify(deadRange),\n          regRange: JSON.stringify(regRange)\n        }\n      }).then(function (data) {\n        _this3.$data.tableInfo.currentPage = data.current;\n        _this3.$data.tableInfo.total = data.total;\n        _this3.$data.tableInfo.pageSize = data.size;\n        _this3.$data.tableInfo.data = data.records;\n        var totalPage = Math.ceil(_this3.tableInfo.total / _this3.tableInfo.pageSize);\n        totalPage = totalPage < 1 ? 1 : totalPage;\n\n        if (_this3.tableInfo.currentPage > totalPage) {\n          _this3.$data.tableInfo.currentPage = totalPage;\n\n          _this3.search();\n        }\n\n        ;\n      });\n    },\n    pageSearch: function pageSearch(changedPage) {\n      this.$data.tableInfo.currentPage = changedPage;\n      this.search();\n    }\n  },\n  created: function created() {\n    this.init();\n  },\n  activated: function activated() {\n    console.log(\"页面激活时调用search方法\");\n    this.search();\n  }\n};",{"version":3,"sources":["list.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<Layout :class=\"'bg-white p-2'\">\r\n\t\t<Row :class=\"'m-1'\">\r\n\t\t\t<Col span=\"4\">\r\n\t\t\t\t<Input :class=\"'w-75 m-2'\" v-model=\"searchKey[0]\" placeholder=\"请输入会员名\" clearable/>\r\n\t\t\t</Col>\r\n\t\t\t<Col span=\"4\">\r\n\t\t\t\t<Select :class=\"'w-75 m-2'\" v-model=\"searchKey[1]\" placeholder=\"请选择押金状态\" clearable>\r\n\t\t\t\t\t<Option v-for=\"(item, index) in depositState\" :value=\"item\" :key=\"index\">{{item}}</Option>\r\n\t\t\t\t</Select>\r\n\t\t\t</Col>\r\n\t\t\t<Col span=\"4\">\r\n\t\t\t\t<Select :class=\"'w-75 m-2'\" v-model=\"searchKey[2]\" placeholder=\"请选择VIP类别\" clearable>\r\n\t\t\t\t\t<Option v-for=\"(item, index) in cardName\" :value=\"item\" :key=\"index\">{{item}}</Option>\r\n\t\t\t\t</Select>\r\n\t\t\t</Col>\r\n\t\t\t<Col span=\"4\">\r\n\t\t\t\t<Input :class=\"'w-75 m-2'\" v-model=\"searchKey[3]\" placeholder=\"请输入联系电话\" clearable/>\r\n\t\t\t</Col>\r\n\t\t\t<Col span=\"4\">\r\n\t\t\t\t<i-switch :class=\"'m-3'\" v-model=\"searchKey[4]\" size=\"large\" true-color=\"#0000ff\" false-color=\"#ff0000\" clearable>\r\n\t\t\t\t\t<span slot=\"open\" value=\"true\">有效</span>\r\n\t\t\t\t\t<span slot=\"close\" value=\"false\">过期</span>\r\n\t\t\t\t</i-switch>\r\n\t\t\t</Col>\t\t\r\n\t\t</Row>\r\n\t\t<Row :class=\"'m-2'\">\r\n\t\t\t<Col span=\"5\">\r\n\t\t\t\t<DatePicker type=\"datetimerange\" v-model=\"regRange\" split-panels placeholder=\"请选择VIP注册时间范围\" style=\"width: 300px\"></DatePicker>\r\n\t\t\t</Col>\r\n\t\t\t<Col span=\"5\">\r\n\t\t\t\t<DatePicker type=\"datetimerange\" v-model=\"deadRange\" split-panels placeholder=\"请选择VIP到期时间范围\" style=\"width: 300px\"></DatePicker>\r\n\t\t\t</Col>\r\n\t\t\t<Col span=\"4\">\r\n\t\t\t\t<Button class=\"m-0\" type=\"primary\" shape=\"circle\" @click=\"search\" icon=\"ios-search\">查询</Button>\r\n\t\t\t</Col>\r\n\t\t</Row>\r\n\t\t<Layout :class=\"'bg-white'\">\r\n\t\t\t<Table border :class=\"'m-2'\" :columns=\"tableInfo.columnInfo\" :data=\"tableInfo.data\">\r\n\t\t\t\t<template slot-scope=\"{ row, index }\" slot=\"action\">\r\n\t\t\t\t\t<Button type=\"primary\" size=\"small\" style=\"margin-right: 5px\" @click=\"show(row.vipId)\">详细</Button>\r\n\t\t\t\t</template>\r\n\t\t\t</Table>\r\n\t\t\t<Page :class=\"'m-2 text-right'\" :page-size=\"tableInfo.pageSize\" @on-change=\"pageSearch\" :total=\"tableInfo.total\" />\r\n\t\t</Layout>\r\n\t</Layout>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tregRange: [],\r\n\t\t\t\tdeadRange: [],\r\n\t\t\t\tcardName: [],\r\n\t\t\t\tsearchKey: ['','','','',null],\r\n\t\t\t\tdepositState:[\r\n\t\t\t\t\t'已充值',\r\n\t\t\t\t\t'未充值',\r\n\t\t\t\t\t'已扣押',\r\n\t\t\t\t],\r\n\t\t\t\ttableInfo: {\r\n\t\t\t\t\tcurrentPage: 1,\r\n\t\t\t\t\tpageSize: 8,\r\n\t\t\t\t\ttotal: 0,\r\n\t\t\t\t\tcolumnInfo: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttitle: \"会员编号\",\r\n\t\t\t\t\t\t\tkey: \"vipId\",\r\n\t\t\t\t\t\t\trender: (h, params) => {\r\n\t\t\t\t\t\t\t\treturn h('span', params.index + (this.tableInfo.currentPage - 1) * this.tableInfo.pageSize + 1);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\twidth: 130,\r\n\t\t\t\t\t\t\tfixed: 'left',\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttitle: \"会员名\",\r\n\t\t\t\t\t\t\tkey: \"clientName\",\r\n\t\t\t\t\t\t\tfixed: 'left',\r\n\t\t\t\t\t\t\twidth: 180,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttitle: \"押金状态\",\r\n\t\t\t\t\t\t\tkey: \"depositState\",\r\n\t\t\t\t\t\t\twidth: 200,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttitle: \"VIP类别\",\r\n\t\t\t\t\t\t\tkey: \"cardName\",\r\n\t\t\t\t\t\t\twidth: 200,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttitle: \"VIP注册时间\",\r\n\t\t\t\t\t\t\tkey: \"regDate\",\r\n\t\t\t\t\t\t\twidth: 200,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttitle: \"VIP到期时间\",\r\n\t\t\t\t\t\t\tkey: \"vipDeadline\",\r\n\t\t\t\t\t\t\twidth: 200,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttitle: \"VIP状态\",\r\n\t\t\t\t\t\t\tkey: \"vipDeleteFlag\",\r\n\t\t\t\t\t\t\trender(h, params){\r\n\t\t\t\t\t\t\t\tlet flag;\r\n\t\t\t\t\t\t\t\tif (params.row.vipDeleteFlag == 1) {\r\n\t\t\t\t\t\t\t\t\tflag = \"有效期内\";\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tflag = \"已过期\";\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn h('span', flag)\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\twidth: 200,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttitle: \"联系电话\",\r\n\t\t\t\t\t\t\tkey: \"phone\",\r\n\t\t\t\t\t\t\twidth: 200,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttitle: \"操作\",\r\n\t\t\t\t\t\t\tslot: 'action',\r\n\t\t\t\t\t\t\t// fixed: 'right',\r\n\t\t\t\t\t\t\twidth: 200,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\tdata: []\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tinit: function() {\r\n\t\t\t\tthis.$data.tableInfo.currentPage = 0;\r\n\t\t\t\t// this.search();\r\n\t\t\t\tthis.http.get({\r\n\t\t\t\t\turl: \"/card/page\",\r\n\t\t\t\t\tparam: {\r\n\t\t\t\t\t\tcurrentPage: 1,\r\n\t\t\t\t\t\tpageSize: 99999\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then(data => {\r\n\t\t\t\t\tlet cardName = [];\r\n\t\t\t\t\tfor(var k in data.records) {\r\n\t\t\t\t\t\tcardName[k] = data.records[k].cardName;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.$data.cardName = Array.from(new Set(cardName));\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tshow: function(vipId) {\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tname: \"vip_detail\",\r\n\t\t\t\t\tparams: {\r\n\t\t\t\t\t\tvipId\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsearch: function() {\r\n\t\t\t\tlet deadRange = [];\r\n\t\t\t\tlet regRange = [];\r\n\t\t\t\t// alert(new Date(+this.$data.deadRange[0] + 8 * 3600 * 1000).toISOString());\r\n\t\t\t\t// alert(new Date(+this.$data.deadRange[1] + 8 * 3600 * 1000).toISOString());\r\n\t\t\t\tif (this.$data.deadRange[0]) {\r\n\t\t\t\t\tdeadRange[0] = new Date(+this.$data.deadRange[0] + 8 * 3600 * 1000).toISOString();\r\n\t\t\t\t\tdeadRange[1] = new Date(+this.$data.deadRange[1] + 8 * 3600 * 1000).toISOString();\r\n\t\t\t\t\t// alert(deadRange[0]);\r\n\t\t\t\t\t// alert(deadRange[1]);\r\n\t\t\t\t}\r\n\t\t\t\tif (this.$data.regRange[0]) {\r\n\t\t\t\t\tregRange[0] = new Date(+this.$data.regRange[0] + 8 * 3600 * 1000).toISOString();\r\n\t\t\t\t\tregRange[1] = new Date(+this.$data.regRange[1] + 8 * 3600 * 1000).toISOString();\r\n\t\t\t\t\t// alert(regRange[0]);\r\n\t\t\t\t\t// alert(regRange[1]);\r\n\t\t\t\t}\r\n\t\t\t\tthis.http.get({\r\n\t\t\t\t\turl: \"/vip-client-deposit-card-vo/page\",\r\n\t\t\t\t\tparam: {\r\n\t\t\t\t\t\tcurrentPage: this.$data.tableInfo.currentPage,\r\n\t\t\t\t\t\tpageSize: this.$data.tableInfo.pageSize,\r\n\t\t\t\t\t\tsearchKey: JSON.stringify(this.$data.searchKey),\r\n\t\t\t\t\t\tdeadRange: JSON.stringify(deadRange),\r\n\t\t\t\t\t\tregRange: JSON.stringify(regRange),\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then(data => {\r\n\t\t\t\t\tthis.$data.tableInfo.currentPage = data.current;\r\n\t\t\t\t\tthis.$data.tableInfo.total = data.total;\r\n\t\t\t\t\tthis.$data.tableInfo.pageSize = data.size;\r\n\t\t\t\t\tthis.$data.tableInfo.data = data.records;\r\n\t\t\t\t\tlet totalPage = Math.ceil(this.tableInfo.total / this.tableInfo.pageSize);\r\n\t\t\t\t\ttotalPage = totalPage < 1 ? 1 : totalPage;\r\n\t\t\t\t\tif( this.tableInfo.currentPage > totalPage) {\r\n\t\t\t\t\t\tthis.$data.tableInfo.currentPage = totalPage;\r\n\t\t\t\t\t\tthis.search();\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tpageSearch: function(changedPage) {\r\n\t\t\t\tthis.$data.tableInfo.currentPage = changedPage;\r\n\t\t\t\tthis.search();\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated: function() {\r\n\t\t\tthis.init();\r\n\t\t},\r\n\t\tactivated: function() {\r\n\t\t\tconsole.log(\"页面激活时调用search方法\");\r\n\t\t\tthis.search();\r\n\t\t},\r\n\t}\r\n</script>\r\n<style>\r\n</style>\r\n"],"sourceRoot":"page/vip"}]}