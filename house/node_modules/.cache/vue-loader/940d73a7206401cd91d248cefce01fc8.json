{"remainingRequest":"D:\\HBuilderProjects\\house\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\HBuilderProjects\\house\\page\\user\\detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\HBuilderProjects\\house\\page\\user\\detail.vue","mtime":1636795319030},{"path":"D:\\HBuilderProjects\\house\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\HBuilderProjects\\house\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\HBuilderProjects\\house\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\HBuilderProjects\\house\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n    export default {\n        data() {\n            return {\n                user: {\n                    nickName: \"\",\n                    password: \"\",\n                },\n\t\t\t\tuserId: 0,\n                roles: [],\n                allRoles: [],\n                // updateFlg: false,\n                // oldUser: {},\n                // oldRoles: [],\n\n            }\n        },\n        methods: {\n\t\t\troleChange: function(roleId) {\n\t\t\t\t\n\t\t\t},\n            cancel: function () {\n                this.$tabs.close();\n            },\n            submit: function () {\n                let self = this;\n\t\t\t\tlet roles = [];\n\t\t\t\tfor (let index in this.$data.roles) {\n\t\t\t\t\tlet roleItem = this.$data.roles[index];\n\t\t\t\t\tif (roleItem.has) {\n\t\t\t\t\t\troles.push(roleItem.roleId);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// self.user.openId = 0;\n\t\t\t\tself.user.roles = JSON.stringify(roles);\n\t\t\t\tdelete self.user.ct;\n\t\t\t\tdelete self.user.ut;\n\t\t\t\tdelete self.user.cu;\n\t\t\t\tdelete self.user.uu;\n\t\t\t\tdelete self.user.openId;\n\t\t\t\tconsole.log(self.user);\n                this.http.put({\n                    url: \"/user/info\",\n                    param: self.user,\n                }).then(() => {\n                    self.message.info(\"修改成功\");\n                });\n            },\n            init: function () {\n                this.search();\n            },\n            searchUser: function () {\n                let self = this;\n\n                this.http.get({\n                    url: \"/user/info\",\n                    param: {\n                        userId: self.$data.user.userId\n                    }\n                }).then(data => {\n\t\t\t\t\tself.user = data.user;\n\t\t\t\t\tfor (let jndex in self.allRoles) {\n\t\t\t\t\t\tlet role = self.allRoles[jndex];\n\t\t\t\t\t\trole.has = false;\n\t\t\t\t\t\tfor (let index in data.roles) {\n\t\t\t\t\t\t\tlet roleItem = data.roles[index];\n\t\t\t\t\t\t\tif (roleItem.roleId == role.roleId) {\n\t\t\t\t\t\t\t\trole.has = true;\n\t\t\t\t\t\t\t\tthis.roles.push(role);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n                });\n            },\n\n            search: function () {\n                let self = this;\n\t\t\t\t// console.log(\"hahahahah\");\n                this.http.get({\n                    url: \"/role/all\",\n                }).then(data => {\n                    self.$data.allRoles = data;\n\t\t\t\t\tconsole.log(self.allRoles);\n                }).then(() => {\n                    self.searchUser();\n                });\n            }\n\n        },\n\n        created: function () {\n\n        },\n        mounted: function () {\n\t\t\tthis.$data.user.userId = this.$route.params.userId;\n            this.init();\n        }\n    }\n",{"version":3,"sources":["detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"detail.vue","sourceRoot":"page/user","sourcesContent":["<template>\n    <Layout class=\"p-5 bg-white\">\n        <Form class=\"p-5\" :model=\"user\" :label-width=\"80\">\r\n\t\t\t<Row>\r\n\t\t\t\t<Col span=\"8\">\r\n\t\t\t\t\t<FormItem class=\"w-100\" label=\"账号\">\n\t\t\t\t\t\t<Input v-model=\"user.account\"/>\n\t\t\t\t\t</FormItem>\n\t\t\t\t\t<FormItem class=\"w-100\" label=\"密码\">\n\t\t\t\t\t\t<Input v-model=\"user.password\"/>\n\t\t\t\t\t</FormItem>\n\t\t\t\t\t<FormItem class=\"w-100\" label=\"电话\">\n\t\t\t\t\t\t<Input v-model=\"user.tel\"/>\n\t\t\t\t\t</FormItem></Col>\r\n\t\t\t\t<Col span=\"8\">\r\n\t\t\t\t\t<FormItem class=\"w-100\" label=\"身份证\">\n\t\t\t\t\t\t<Input v-model=\"user.secId\"/>\n\t\t\t\t\t</FormItem>\n\t\t\t\t\t<FormItem class=\"w-100\" label=\"创建时间\">\n\t\t\t\t\t\t<label>{{user.ct}}</label>\n\t\t\t\t\t</FormItem>\r\n\t\t\t\t</Col>\r\n\t\t\t\t<Col span=\"8\">\r\n\t\t\t\t\t<FormItem class=\"w-100\" label=\"角色\">\r\n\t\t\t\t\t\t<div v-for=\"(item, key) in roles\" :key=\"key\">\r\n\t\t\t\t\t\t\t<Checkbox @on-change=\"roleChange(item.roleId)\" v-model=\"item.has\">\r\n\t\t\t\t\t\t\t{{item.roleName}}</Checkbox>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</FormItem>\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\n            \n            \r\n\t\t\t<FormItem>\r\n\t\t\t    <Button @click=\"submit\" type=\"primary\">提交</Button>\r\n\t\t\t    <Button @click=\"cancel\" style=\"margin-left: 8px\">取消</Button>\r\n\t\t\t</FormItem>\n        </Form>\n    </Layout>\n\n</template>\n<script>\n    export default {\n        data() {\n            return {\n                user: {\n                    nickName: \"\",\n                    password: \"\",\n                },\r\n\t\t\t\tuserId: 0,\r\n                roles: [],\n                allRoles: [],\n                // updateFlg: false,\n                // oldUser: {},\n                // oldRoles: [],\n\n            }\n        },\n        methods: {\r\n\t\t\troleChange: function(roleId) {\r\n\t\t\t\t\r\n\t\t\t},\n            cancel: function () {\n                this.$tabs.close();\n            },\n            submit: function () {\n                let self = this;\r\n\t\t\t\tlet roles = [];\r\n\t\t\t\tfor (let index in this.$data.roles) {\r\n\t\t\t\t\tlet roleItem = this.$data.roles[index];\r\n\t\t\t\t\tif (roleItem.has) {\r\n\t\t\t\t\t\troles.push(roleItem.roleId);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// self.user.openId = 0;\r\n\t\t\t\tself.user.roles = JSON.stringify(roles);\r\n\t\t\t\tdelete self.user.ct;\r\n\t\t\t\tdelete self.user.ut;\r\n\t\t\t\tdelete self.user.cu;\r\n\t\t\t\tdelete self.user.uu;\r\n\t\t\t\tdelete self.user.openId;\r\n\t\t\t\tconsole.log(self.user);\n                this.http.put({\n                    url: \"/user/info\",\n                    param: self.user,\n                }).then(() => {\n                    self.message.info(\"修改成功\");\n                });\n            },\n            init: function () {\n                this.search();\n            },\n            searchUser: function () {\n                let self = this;\n\n                this.http.get({\n                    url: \"/user/info\",\n                    param: {\n                        userId: self.$data.user.userId\n                    }\n                }).then(data => {\r\n\t\t\t\t\tself.user = data.user;\r\n\t\t\t\t\tfor (let jndex in self.allRoles) {\r\n\t\t\t\t\t\tlet role = self.allRoles[jndex];\r\n\t\t\t\t\t\trole.has = false;\r\n\t\t\t\t\t\tfor (let index in data.roles) {\r\n\t\t\t\t\t\t\tlet roleItem = data.roles[index];\r\n\t\t\t\t\t\t\tif (roleItem.roleId == role.roleId) {\r\n\t\t\t\t\t\t\t\trole.has = true;\r\n\t\t\t\t\t\t\t\tthis.roles.push(role);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\n                });\n            },\n\n            search: function () {\n                let self = this;\r\n\t\t\t\t// console.log(\"hahahahah\");\n                this.http.get({\n                    url: \"/role/all\",\n                }).then(data => {\n                    self.$data.allRoles = data;\r\n\t\t\t\t\tconsole.log(self.allRoles);\n                }).then(() => {\n                    self.searchUser();\n                });\n            }\n\n        },\n\n        created: function () {\r\n\n        },\n        mounted: function () {\r\n\t\t\tthis.$data.user.userId = this.$route.params.userId;\n            this.init();\n        }\n    }\n</script>\n\n<style>\n</style>\n"]}]}